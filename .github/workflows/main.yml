name: Daily_Data_Automation

# 1. THE TRIGGER: When should this happen?
on:
  schedule:
    - cron: '0 0 * * *'  # Runs every night at midnight
  workflow_dispatch:      # Adds a "Run" button in GitHub so you can test it manually

jobs:
  run_model_job:
    runs-on: ubuntu-latest

    steps:
      # STEP 1: Copy your code from GitHub onto the runner machine
      - name: Checkout Repository
        uses: actions/checkout@v3

      # STEP 2: Install Python so it can run your script
      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.9'

      # STEP 3: Install the libraries your script needs
      - name: Install Libraries
        run: |
          pip install pandas joblib scikit-learn sqlalchemy psycopg2-binary

      # STEP 4: Execute your Python script
      - name: Run Prediction Script
        env:
          # This pulls the URL from your GitHub Secrets
          SQL_URL: ${{ secrets.URL }} 
        run: python sql/daily_data.py
